# BEGIN_KITTY_THEME
# vim:fileencoding=utf-8:foldmethod=marker

# -----------------------------------------------------------------------------
# 字体配置 (Fonts)
# -----------------------------------------------------------------------------
# 常规字体，这里使用的是 Fira Code
font_family Fira Code
# 粗体字体
bold_font Fira Code Bold
# 斜体字体，这里混合使用了 Maple Mono
italic_font Maple Mono Italic
# 粗斜体字体
bold_italic_font Maple Mono BoldItalic
# 字体大小
font_size 16.0

# 符号映射 (Symbol Map)
# 将特定的 Unicode 范围映射到 Symbols Nerd Font Mono 字体，
# 这通常用于确保终端中的各种图标（如 git 符号、文件类型图标）能正常显示。
symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d7,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+ed00-U+efc1,U+f000-U+f2ff,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f533,U+f0001-U+f1af0 Symbols Nerd Font Mono

# 禁用连字 (Ligatures) - 仅在光标所在行禁用
# 当光标移动到连字字符及其组件上时，禁用连字显示，方便编辑代码。
disable_ligatures cursor

# -----------------------------------------------------------------------------
# 光标配置 (Cursor)
# -----------------------------------------------------------------------------
# 光标拖尾特效，0 为关闭。设置为大于 0 的数值会有光标移动残影
cursor_trail 0
# 光标颜色
# 设置为 none 表示让光标颜色与该位置文本的背景色反转（反色显示）
cursor none

# -----------------------------------------------------------------------------
# 杂项配置 (Misc)
# -----------------------------------------------------------------------------
# 回滚缓冲区行数，决定了你能往回翻看多少行历史输出
scrollback_lines 10000
# 触摸板滚动的倍率，6.0 表示更灵敏的滚动
touch_scroll_multiplier 6.0
# 选中即复制，鼠标选中文字后自动复制到剪贴板
copy_on_select yes
# 禁用音频响铃（出错时不要发出“叮”的声音）
enable_audio_bell no
# 退出时记住窗口大小
remember_window_size yes
# 如果不记住窗口大小，则使用以下初始宽高（单位：像素）
initial_window_width 1600
initial_window_height 1000
# 启用的布局
# Splits: 允许任意水平/垂直切割 (像 iTerm2 或 Tmux)
# Stack: 当前聚焦的窗口最大化显示 (类似 Tmux 的 zoom)
enabled_layouts Splits,Stack
# 隐藏窗口装饰（如标题栏、边框等），让界面更简洁
hide_window_decorations yes


# -----------------------------------------------------------------------------
# 标签栏配置 (Tab Bar)
# -----------------------------------------------------------------------------
# 标签栏位置：底部
tab_bar_edge                bottom
# 标签栏样式：Powerline 风格
tab_bar_style               powerline
# Powerline 的具体形状：斜角 (slanted)
tab_powerline_style         slanted

# 允许动态调整背景不透明度 (需要快捷键配合使用)
dynamic_background_opacity yes

# -----------------------------------------------------------------------------
# 高级功能
# -----------------------------------------------------------------------------
# 配置回滚分页器 (Scrollback Pager)
# 按下快捷键查看历史记录时，使用 neovim 打开缓冲区内容
# 这里不仅调用了 nvim，还加载了一个 lua 脚本来处理颜色显示
# scrollback_pager $SHELL -c 'nvim -c "Baleia"' # (旧配置注释)
scrollback_pager ~/.local/share/bob/nvim-bin/nvim -c "lua require('util').colorize()"

# 标签标题模板
# 正常显示标题加粗。
# 如果当前处于 'stack' (全屏) 模式且有多个窗口，显示一个列表图标 ' ' 以示提醒。
tab_title_template "{title}{fmt.bold}{'  ' if num_windows > 1 and layout_name == 'stack' else ''}"


# -----------------------------------------------------------------------------
# 按键映射 (Key Mappings)
# -----------------------------------------------------------------------------
# 定义 Kitty 的修饰键为 Command + Shift
kitty_mod cmd+shift

# 标签页导航
map kitty_mod+l next_tab          # Cmd+Shift+l 下一个标签
map kitty_mod+h previous_tab      # Cmd+Shift+h 上一个标签

# 布局切换
map kitty_mod+m toggle_layout stack  # Cmd+Shift+m 切换最大化/单窗口模式
map kitty_mod+z toggle_layout stack  # Cmd+Shift+z 同上（习惯 z = zoom）

# 窗口管理 (分屏)
# 在当前目录下水平/垂直分割窗口
map kitty_mod+enter launch --location=split --cwd=current  # Cmd+Shift+Enter 自动分割
map kitty_mod+\ launch --location=vsplit --cwd=current     # Cmd+Shift+\ 垂直分割 (左右)
# 注意：原配置曾写为 currentt，已修正为 current
map kitty_mod+minus launch --location=hsplit --cwd=current # Cmd+Shift+- 水平分割 (上下)

# 窗口焦点移动
map kitty_mod+left neighboring_window left   # 焦点移至左侧窗口
map kitty_mod+right neighboring_window right # 焦点移至右侧窗口
map kitty_mod+up neighboring_window up       # 焦点移至上方窗口
map kitty_mod+down neighboring_window down   # 焦点移至下方窗口

# 其他功能
map kitty_mod+s show_scrollback   # Cmd+Shift+s 在分页器(nvim)中显示历史记录
map kitty_mod+r load_config_file  # Cmd+Shift+r 重载配置文件

# MacOS 风格常用快捷键
# cmd+t 开启新标签页，并保留当前目录
map cmd+t new_tab_with_cwd

# cmd+n 开启新窗口（OS 窗口），并保留当前目录
map cmd+n new_window_with_cwd

# -----------------------------------------------------------------------------
# 主题 (Theme)
# -----------------------------------------------------------------------------
# 引入外部主题文件
include current-theme.conf
